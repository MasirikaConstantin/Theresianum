import{j as e}from"./app-BiR3H72c.js";import{C as c,a as m,b as o,d as x}from"./card-CtX8457h.js";import{T as p}from"./trending-up-CTfoIeSh.js";import{R as f,C as N,X as b,Y as g,T as v,L as y,B as i}from"./generateCategoricalChart-ClOP-bqC.js";import{B as _}from"./BarChart-CLEOG6BU.js";import{P as h}from"./package-CMie0C_N.js";import"./app-BojVexQw.js";import"./utils-D-KgF5mV.js";import"./createLucideIcon-AVJzoGs5.js";const S=({stats:t})=>{const n=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(s).replace("$US","$"),j=[{name:"Ventes",total:t.montant_total,net:t.montant_net,remise:t.montant_remise}],d=t.top_items.filter(s=>s.item_id!==null&&s.item!==null),l=t.top_items.filter(s=>s.item_id===null||s.item===null),u=({active:s,payload:a,label:r})=>s&&a&&a.length?e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded shadow-md",children:[e.jsx("p",{className:"font-semibold",children:r}),e.jsxs("p",{className:"text-blue-500",children:["Total: ",n(a[0].value)]}),e.jsxs("p",{className:"text-green-500",children:["Net: ",n(a[1].value)]}),e.jsxs("p",{className:"text-red-500",children:["Remise: ",n(a[2].value)]})]}):null;return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-5 w-5"}),"Performances des Ventes"]})}),e.jsx(x,{children:e.jsx("div",{className:"h-80",children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(_,{data:j,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(N,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"name"}),e.jsx(g,{tickFormatter:n}),e.jsx(v,{content:e.jsx(u,{})}),e.jsx(y,{}),e.jsx(i,{dataKey:"total",name:"Chiffre d'Affaires Total",fill:"#3b82f6",radius:[4,4,0,0]}),e.jsx(i,{dataKey:"net",name:"Montant Net",fill:"#10b981",radius:[4,4,0,0]}),e.jsx(i,{dataKey:"remise",name:"Remises",fill:"#ef4444",radius:[4,4,0,0]})]})})})})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5"}),"Top des Produits & Services"]})}),e.jsxs(x,{children:[e.jsx("div",{className:"space-y-4",children:d.length>0?e.jsxs(e.Fragment,{children:[d.map((s,a)=>{var r;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold",children:a+1}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[((r=s.item)==null?void 0:r.name)||"Item inconnu",s.type==="service"&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:"Service"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.total_quantite," ",s.type==="service"?"fois":"unités"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-bold text-green-600",children:n(Number(s.total_montant))}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Number(s.total_quantite)>0?`${n(Number(s.total_montant)/Number(s.total_quantite))}/${s.type==="service"?"fois":"unité"}`:"Prix indisponible"})]})]},`${s.type}-${s.item_id}-${a}`)}),l.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("p",{className:"text-yellow-800 text-sm font-medium mb-2",children:[l.length," item(s) sans information détaillée"]}),e.jsxs("p",{className:"text-yellow-700 text-xs",children:["Total: ",n(l.reduce((s,a)=>s+Number(a.total_montant),0))]})]})]}):e.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[e.jsx(h,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Aucune donnée de vente disponible"})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Résumé Financier"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total : "}),e.jsx("span",{className:"font-semibold",children:n(t.montant_total)})]}),t.montant_remise>0&&e.jsxs("div",{className:"flex justify-between text-red-500",children:[e.jsx("span",{children:"Remises:"}),e.jsxs("span",{className:"font-semibold",children:["-",n(t.montant_remise)]})]}),e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Montant Net:"}),e.jsx("span",{className:"font-semibold",children:n(t.montant_net)})]}),t.total_depenses>0&&e.jsxs("div",{className:"flex justify-between text-orange-500",children:[e.jsx("span",{children:"Dépenses:"}),e.jsxs("span",{className:"font-semibold",children:["-",n(t.total_depenses)]})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Bénéfice Net:"}),e.jsx("span",{className:t.benefice_net>=0?"text-green-600":"text-red-600",children:n(t.benefice_net)})]})})]})]})]})]})]})};export{S as default};
