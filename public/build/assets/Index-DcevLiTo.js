import{a as D,r as h,b as l,t as x,j as e,H as A,L as f}from"./app-BiR3H72c.js";import{A as N}from"./app-layout-DXRwYbWn.js";import{B as u}from"./button-DfBT4842.js";import{T,f as P,a as S,b as j,c as i,d as w,e as n}from"./table-CMAMKCJS.js";import{A as C,a as y,b as E,c as k,d as B,e as H,f as I,g as L,h as R}from"./alert-dialog-BGz4gOWV.js";import{B as p}from"./badge-NokOUrZG.js";import{I as $}from"./input-CBAXjYrY.js";import{P as z,a as F,b as c,c as V,d as q,e as G,f as J}from"./pagination-3fOkAI-N.js";import{S as K}from"./search-D5WKme3c.js";import{P as M}from"./plus-BhylbLjU.js";import{E as O}from"./eye-xwMsSdsH.js";import{T as Q}from"./trash-2-DAGSehnZ.js";import{f as U}from"./format-B6qNwQQI.js";import{f as W}from"./fr-CLbTb0XB.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./chevron-left-CImlN05b.js";const X=[{title:"Dashboard",href:"/dashboard"},{title:"Transferts entre succursales",href:"/transferts"}];function ke({auth:g}){const{flash:o,transferts:t}=D().props,[d,v]=h.useState("");h.useEffect(()=>{const r=setTimeout(()=>{l.get(route("transferts.index"),{search:d},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(r)},[d]),o.error&&x.error(o.error),o.success&&x.success(o.success);const _=r=>{l.delete(route("transferts.destroy",r))},b=r=>{switch(r){case"validé":return e.jsx(p,{variant:"success",children:"Validé"});case"refusé":return e.jsx(p,{variant:"destructive",children:"Refusé"});default:return e.jsx(p,{variant:"secondary",children:"En attente"})}};return e.jsxs(N,{auth:g,breadcrumbs:X,children:[e.jsx(A,{title:"Transferts entre succursales"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Transferts entre succursales"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(K,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx($,{placeholder:"Rechercher...",className:"pl-9",value:d,onChange:r=>v(r.target.value)})]}),e.jsx(f,{href:route("transferts.create"),children:e.jsxs(u,{children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Nouveau transfert"]})})]})]}),e.jsx("div",{className:"rounded-lg border shadow-sm",children:e.jsxs(T,{children:[e.jsx(P,{children:t.total>0?`Affichage des transferts ${t.from} à ${t.to} sur ${t.total}`:"Aucun transfert trouvé"}),e.jsx(S,{children:e.jsxs(j,{children:[e.jsx(i,{children:"Statut"}),e.jsx(i,{children:"Nb. produits"}),e.jsx(i,{children:"Initiateur"}),e.jsx(i,{children:"Date demande"}),e.jsx(i,{children:"Actions"})]})}),e.jsx(w,{children:t.data.map(r=>{var s,a,m;return e.jsxs(j,{children:[e.jsx(n,{children:b(((s=r.transfert_stocks[0])==null?void 0:s.statut)||"en attente")}),e.jsx(n,{children:r.transfert_stocks.length}),e.jsx(n,{children:(a=r.user)==null?void 0:a.name}),e.jsx(n,{children:U(new Date(r.created_at),"PP",{locale:W})}),e.jsxs(n,{className:"flex gap-2",children:[e.jsx(f,{href:route("transferts.show",r.ref),children:e.jsx(u,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})})}),((m=r.transfert_stocks[0])==null?void 0:m.statut)==="en attente"&&e.jsx(e.Fragment,{children:e.jsxs(C,{children:[e.jsx(y,{asChild:!0,children:e.jsx(u,{variant:"destructive",size:"sm",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsxs(E,{children:[e.jsxs(k,{children:[e.jsx(B,{children:"Êtes-vous sûr ?"}),e.jsx(H,{children:"Cette action supprimera définitivement ce transfert et ne pourra pas être annulée."})]}),e.jsxs(I,{children:[e.jsx(L,{children:"Annuler"}),e.jsx(R,{onClick:()=>_(r.ref),children:"Supprimer"})]})]})]})})]})]},r.id)})})]})}),t.last_page>1&&e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(z,{children:e.jsxs(F,{children:[e.jsx(c,{children:e.jsx(V,{href:t.prev_page_url||"#",onClick:r=>{if(!t.prev_page_url){r.preventDefault();return}r.preventDefault(),l.get(t.prev_page_url,{},{preserveState:!0,replace:!0,preserveScroll:!0})},className:t.prev_page_url?"":"pointer-events-none opacity-50"})}),t.links.slice(1,-1).map((r,s)=>r.label==="..."?e.jsx(c,{children:e.jsx(q,{})},s):e.jsx(c,{children:e.jsx(G,{href:r.url||"#",onClick:a=>{if(!r.url){a.preventDefault();return}a.preventDefault(),l.get(r.url,{},{preserveState:!0,replace:!0,preserveScroll:!0})},isActive:r.active,children:r.label})},s)),e.jsx(c,{children:e.jsx(J,{href:t.next_page_url||"#",onClick:r=>{if(!t.next_page_url){r.preventDefault();return}r.preventDefault(),l.get(t.next_page_url,{},{preserveState:!0,replace:!0,preserveScroll:!0})},className:t.next_page_url?"":"pointer-events-none opacity-50"})})]})})})]})]})}export{ke as default};
