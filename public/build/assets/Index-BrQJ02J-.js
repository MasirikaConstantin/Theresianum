import{r as v,u as O,j as e,t as S,H as B,b as R}from"./app-BiR3H72c.js";import{B as x}from"./button-DfBT4842.js";import{D as F,a as L,b as I,c as P,d as k,e as z,f as V,g as G}from"./dialog-C2xpyM_9.js";import{I as $}from"./input-CBAXjYrY.js";import{L as t}from"./label-C35PAQno.js";import{T as q}from"./textarea-CIxwVg30.js";import{S as J}from"./switch-BTEMsqTc.js";import{B as w}from"./badge-NokOUrZG.js";import{S as E}from"./breadcrumbs-CfH9HSk2.js";import{A as K}from"./app-layout-DXRwYbWn.js";import{T as b}from"./index-CtBsO7PD.js";import{T as Q,f as U,a as W,b as M,c as u,d as X,e as f}from"./table-CMAMKCJS.js";import{A as Y,a as Z,b as y,c as ee,d as se,e as ie,f as re,g as te,h as ae}from"./alert-dialog-BGz4gOWV.js";import{P as ne}from"./plus-BhylbLjU.js";import{E as le}from"./eye-xwMsSdsH.js";import{P as de}from"./pencil-BBfKa5zT.js";import{T as oe}from"./trash-2-DAGSehnZ.js";import{f as ce}from"./format-B6qNwQQI.js";import{f as me}from"./fr-CLbTb0XB.js";import"./app-BojVexQw.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-CaoPq-lK.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-DufLrpEQ.js";import"./index-Di7OUUGl.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";function _({category:s,open:n,onOpenChange:a,trigger:h}){const[d,m]=v.useState(n||!1),l=!!(s!=null&&s.id),{data:p,setData:o,post:N,put:C,processing:D,errors:c,reset:j}=O({nom:(s==null?void 0:s.nom)||"",description:(s==null?void 0:s.description)||"",is_active:(s==null?void 0:s.is_active)??!0});v.useEffect(()=>{n!==void 0&&m(n)},[n]),v.useEffect(()=>{s?o({nom:s.nom,description:s.description,is_active:s.is_active}):j()},[s]);const g=r=>{m(r),a==null||a(r),r||setTimeout(()=>j(),300)},A=r=>{r.preventDefault(),l&&(s!=null&&s.id)?C(route("categories.update",s.id),{onSuccess:()=>{j(),g(!1)}}):N(route("categories.store"),{onSuccess:()=>{j(),g(!1)}})};return e.jsxs(F,{open:d,onOpenChange:g,children:[e.jsx(L,{asChild:!0,children:h||e.jsx(x,{variant:"outline",children:l?"Modifier":"Nouvelle Catégorie"})}),e.jsx(I,{className:"sm:max-w-[500px]",children:e.jsxs("form",{onSubmit:A,children:[e.jsxs(P,{children:[e.jsx(k,{children:l?"Modifier la catégorie":"Nouvelle catégorie"}),e.jsx(z,{children:l?"Modifiez les informations de la catégorie ici.":"Remplissez les informations pour créer une nouvelle catégorie."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"nom",children:"Nom de la catégorie *"}),e.jsx($,{id:"nom",name:"nom",value:p.nom,onChange:r=>o("nom",r.target.value),placeholder:"Entrez le nom de la catégorie",className:c.nom?"border-destructive":""}),c.nom&&e.jsx("p",{className:"text-sm text-destructive",children:c.nom})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(q,{id:"description",name:"description",value:p.description,onChange:r=>o("description",r.target.value),placeholder:"Description de la catégorie",rows:3,className:c.description?"border-destructive":""}),c.description&&e.jsx("p",{className:"text-sm text-destructive",children:c.description})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{id:"is_active",checked:p.is_active,onCheckedChange:r=>o("is_active",r)}),e.jsx(t,{htmlFor:"is_active",children:"Catégorie active"})]})]}),e.jsxs(V,{children:[e.jsx(G,{asChild:!0,children:e.jsx(x,{type:"button",variant:"outline",children:"Annuler"})}),e.jsx(x,{type:"submit",disabled:D,children:D?"En cours...":l?"Modifier":"Créer"})]})]})})]})}function xe({category:s,open:n,onOpenChange:a}){var d;const h=m=>new Date(m).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsx(F,{open:n,onOpenChange:a,children:e.jsxs(I,{className:"sm:max-w-[500px]",children:[e.jsxs(P,{children:[e.jsx(k,{children:"Détails de la catégorie"}),e.jsx(z,{children:"Informations complètes sur la catégorie"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Nom"}),e.jsx("p",{className:"text-sm mt-1",children:s.nom})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Statut"}),e.jsx("div",{className:"mt-1",children:e.jsx(w,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})})]})]}),e.jsx(E,{}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Description"}),e.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:s.description||"Aucune description"})]}),e.jsx(E,{}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Référence"}),e.jsx("p",{className:"text-sm mt-1 font-mono",children:s.ref})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Créée le"}),e.jsx("p",{className:"text-sm mt-1",children:h(s.created_at)})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Modifiée le"}),e.jsx("p",{className:"text-sm mt-1",children:s.updated_at?h(s.updated_at):"-"})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Créée par"}),e.jsx("p",{className:"text-sm mt-1",children:((d=s.enregistre_par)==null?void 0:d.name)||"Système"})]})]}),s.modifie_par&&e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium",children:"Modifiée par"}),e.jsx("p",{className:"text-sm mt-1",children:s.modifie_par.name})]})]})]})})}function Ze({categories:s,auth:n,flash:a}){const h=[{title:"Tableau de bord",href:b("dashboard")},{title:"Produits",href:b("produits.index")},{title:"Categories",href:b("categories.index")}];a.error&&S.error(a.error),a.success&&S.success(a.success);const[d,m]=v.useState(null),[l,p]=v.useState(null),[o,N]=v.useState(!1),C=n.user.role==="admin",D=i=>{R.delete(b("categories.destroy",i))},c=i=>{m(i)},j=i=>{p(i)},g=()=>{m(null)},A=()=>{p(null)},r=i=>ce(new Date(i),"PPP",{locale:me});return e.jsxs(K,{auth:n,breadcrumbs:h,children:[e.jsx(B,{title:"Categories"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des categories"}),e.jsx("div",{className:"flex gap-2",children:C&&e.jsx(_,{open:o,onOpenChange:N,trigger:e.jsxs(x,{variant:"outline",children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),"Ajouter une categorie"]})})})]}),e.jsx("div",{className:"rounded-lg border shadow-sm",children:e.jsxs(Q,{children:[e.jsx(U,{children:s.length>0?`Affichage des categories ${s.length}`:"Aucune categorie trouvé"}),e.jsx(W,{children:e.jsxs(M,{children:[e.jsx(u,{className:"w-12",children:"#"}),e.jsx(u,{children:"Nom"}),e.jsx(u,{children:"Statut"}),e.jsx(u,{children:"Enregistré par"}),e.jsx(u,{children:"Créée le"}),e.jsx(u,{children:"Actions"})]})}),e.jsx(X,{children:s.map((i,H)=>{var T;return e.jsxs(M,{children:[e.jsx(f,{className:"font-medium",children:H+1}),e.jsx(f,{className:"font-medium",children:i.nom}),e.jsx(f,{children:e.jsx(w,{variant:i.is_active?"default":"secondary",children:i.is_active?"Active":"Inactive"})}),e.jsx(f,{children:i.enregistre_par?e.jsx(w,{variant:"outline",children:(T=i.enregistre_par)==null?void 0:T.name}):"-"}),e.jsx(f,{children:r(i.created_at)}),e.jsxs(f,{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>j(i),children:e.jsx(le,{className:"h-4 w-4"})}),C&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"outline",size:"sm",onClick:()=>c(i),children:e.jsx(de,{className:"h-4 w-4"})}),e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(x,{variant:"destructive",size:"sm",children:e.jsx(oe,{className:"h-4 w-4"})})}),e.jsxs(y,{children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Êtes-vous sûr ?"}),e.jsx(ie,{children:"Cette action supprimera définitivement la categorie et ne pourra pas être annulée."})]}),e.jsxs(re,{children:[e.jsx(te,{children:"Annuler"}),e.jsx(ae,{onClick:()=>D(i.ref),children:"Supprimer"})]})]})]})]})]})]},i.id)})})]})}),o&&e.jsx(_,{open:o,onOpenChange:N}),d&&e.jsx(_,{category:d,open:!!d,onOpenChange:i=>!i&&g()}),l&&e.jsx(xe,{category:l,open:!!l,onOpenChange:i=>!i&&A()})]})]})}export{Ze as default};
