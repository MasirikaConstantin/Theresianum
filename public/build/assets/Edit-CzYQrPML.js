import{u as F,j as e,H as A,L as j,t as L}from"./app-BiR3H72c.js";import{A as w,a as D,b as V,c as P}from"./app-layout-DXRwYbWn.js";import{B as d}from"./button-DfBT4842.js";import{I as c}from"./input-CBAXjYrY.js";import{L as l}from"./label-C35PAQno.js";import{T as U}from"./textarea-CIxwVg30.js";import{S as k}from"./switch-BTEMsqTc.js";import{B as q}from"./badge-NokOUrZG.js";import{S as v,a as f,b as _,c as N,e as E,f as I,d as o}from"./select-B5KxOem9.js";import{C as T}from"./chevron-left-CImlN05b.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./index-DufLrpEQ.js";import"./index-Di7OUUGl.js";import"./index-BdQq_4o_.js";import"./check-DVZ7LPyx.js";const $=n=>[{title:"Dashboard",href:"/dashboard"},{title:"Produits",href:"/produits"},{title:`Modifier ${n}`,href:"#"}];function fe({auth:n,produit:a,categories:m}){const{data:i,setData:s,post:C,processing:p,errors:t}=F({_method:"PUT",name:a.name,avatar:null,current_avatar:a.avatar,description:a.description,prix_achat:a.prix_achat,prix_vente:a.prix_vente,actif:a.actif,type:a.type,categorie_id:a.categorie_id?String(a.categorie_id):""}),b=r=>{r.preventDefault(),C(route("produits.update",a.id),{onError:()=>{L.error("Veuillez corriger les erreurs dans le formulaire")},preserveScroll:!0,forceFormData:!0})},y=r=>{if(r.target.files&&r.target.files[0]){s("avatar",r.target.files[0]);const h=new FileReader;h.onload=g=>{var u;(u=g.target)!=null&&u.result&&s("current_avatar",g.target.result)},h.readAsDataURL(r.target.files[0])}},S=n.user.role==="admin",x=m.find(r=>r.id===parseInt(i.categorie_id));return e.jsxs(w,{auth:n,breadcrumbs:$(a.name),children:[e.jsx(A,{title:`Modifier ${a.name}`}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{href:route("produits.index"),children:e.jsx(d,{variant:"outline",size:"icon",children:e.jsx(T,{className:"h-4 w-4"})})}),e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Modifier ",a.name]})]}),e.jsxs("form",{onSubmit:b,className:"grid gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(D,{className:"h-16 w-16",children:[e.jsx(V,{src:i.current_avatar?`/storage/${i.current_avatar}`:void 0}),e.jsx(P,{children:a.name.split(" ").map(r=>r[0]).join("")})]}),e.jsxs("div",{className:"grid gap-2 flex-1",children:[e.jsx(l,{htmlFor:"avatar",children:"Changer l'image"}),e.jsx(c,{id:"avatar",type:"file",onChange:y,accept:"image/*"}),t.avatar&&e.jsx("p",{className:"text-sm text-red-500",children:t.avatar})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"name",children:"Nom du produit"}),e.jsx(c,{id:"name",value:i.name,onChange:r=>s("name",r.target.value),placeholder:"Nom du produit",required:!0}),t.name&&e.jsx("p",{className:"text-sm text-red-500",children:t.name})]}),e.jsxs("div",{className:"grid gap-2 ",children:[e.jsx(l,{htmlFor:"categorie_id",children:"Catégorie"}),e.jsxs(v,{value:i.categorie_id,onValueChange:r=>s("categorie_id",r),required:!0,children:[e.jsx(f,{className:"w-full mt-2",children:e.jsx(_,{placeholder:"Sélectionner une catégorie",...x?{placeholder:x.nom}:{}})}),e.jsx(N,{children:e.jsxs(E,{children:[e.jsx(I,{children:"Catégories"}),m.map(r=>e.jsx(o,{value:String(r.id),children:r.nom},r.id))]})})]}),t.categorie_id&&e.jsx("p",{className:"text-sm text-red-500",children:t.categorie_id})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"description",children:"Description (optionnel)"}),e.jsx(U,{id:"description",value:i.description||"",onChange:r=>s("description",r.target.value),placeholder:"Description du produit",rows:4}),t.description&&e.jsx("p",{className:"text-sm text-red-500",children:t.description})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"prix_achat",children:"Prix d'achat ($)"}),e.jsx(c,{id:"prix_achat",type:"number",min:"0",step:"0.01",value:i.prix_achat,onChange:r=>s("prix_achat",parseFloat(r.target.value)),required:!0}),t.prix_achat&&e.jsx("p",{className:"text-sm text-red-500",children:t.prix_achat})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"prix_vente",children:"Prix de vente ($)"}),e.jsx(c,{id:"prix_vente",type:"number",min:"0",step:"0.01",value:i.prix_vente,onChange:r=>s("prix_vente",parseFloat(r.target.value)),required:!0}),t.prix_vente&&e.jsx("p",{className:"text-sm text-red-500",children:t.prix_vente})]})]}),S&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:["Type :",e.jsx(q,{variant:"default",className:"ml-2",children:i.type==="a_utiliser"?"A Utiliser Comme accessoire":"A Vendre"}),e.jsxs(v,{value:i.type,onValueChange:r=>s("type",r),required:!0,children:[e.jsx(f,{className:"w-[180px] mt-2",children:e.jsx(_,{placeholder:"Sélectionner un type",...i.type?{placeholder:i.type==="a_utiliser"?"A Utiliser":"A Vendre"}:{}})}),e.jsxs(N,{children:[e.jsx(o,{value:"a_utiliser",children:"A Utiliser Comme accessoire"}),e.jsx(o,{value:"a_vendre",children:"A Vendre"})]})]}),t.type&&e.jsx("p",{className:"text-sm text-red-500",children:t.type})]}),e.jsx(k,{id:"actif",checked:i.actif,onCheckedChange:r=>s("actif",r)}),e.jsx(l,{htmlFor:"actif",children:"Produit actif"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(j,{href:route("produits.index"),children:e.jsx(d,{variant:"outline",children:"Annuler"})}),e.jsx(d,{type:"submit",disabled:p,children:p?"Enregistrement...":"Enregistrer"})]})]})]})]})}export{fe as default};
