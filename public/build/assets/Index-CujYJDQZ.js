import{a as D,r as u,b as l,t as h,j as e,H as S,L as p}from"./app-BiR3H72c.js";import{A}from"./app-layout-DXRwYbWn.js";import{B as o}from"./button-DfBT4842.js";import{T as _,f as w,a as C,b as x,c as t,d as P,e as a}from"./table-CMAMKCJS.js";import{A as T,a as y,b as E,c as I,d as k,e as B,f as H,g as $,h as L}from"./alert-dialog-BGz4gOWV.js";import{B as f}from"./badge-NokOUrZG.js";import{I as R}from"./input-CBAXjYrY.js";import{P as z,a as F,b as d,c as U,d as G,e as q,f as J}from"./pagination-3fOkAI-N.js";import{S as K}from"./switch-BTEMsqTc.js";import{S as M}from"./search-D5WKme3c.js";import{P as O}from"./plus-BhylbLjU.js";import{E as Q}from"./eye-xwMsSdsH.js";import{P as V}from"./pencil-BBfKa5zT.js";import{T as W}from"./trash-2-DAGSehnZ.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./chevron-left-CImlN05b.js";import"./index-Di7OUUGl.js";const X=[{title:"Dashboard",href:"/dashboard"},{title:"Services",href:"/services"}];function ke({auth:j}){const{flash:n,services:s,filters:g}=D().props,[m,v]=u.useState(g.search||"");u.useEffect(()=>{const r=setTimeout(()=>{l.get(route("services.index"),{search:m},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(r)},[m]),n.error&&h.error(n.error),n.success&&h.success(n.success);const N=r=>{l.delete(route("services.destroy",r))},b=(r,i)=>{l.patch(route("services.update-status",r),{actif:i})};return e.jsxs(A,{auth:j,breadcrumbs:X,children:[e.jsx(S,{title:"Services"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des services"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative w-full md:w-64",children:[e.jsx(M,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(R,{placeholder:"Rechercher...",className:"pl-9",value:m,onChange:r=>v(r.target.value)})]}),e.jsx(p,{href:route("services.create"),children:e.jsxs(o,{children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Ajouter un service"]})})]})]}),e.jsx("div",{className:"rounded-lg border shadow-sm",children:e.jsxs(_,{children:[e.jsx(w,{children:s.total>0?`Affichage des services ${s.from} à ${s.to} sur ${s.total}`:"Aucun service trouvé"}),e.jsx(C,{children:e.jsxs(x,{children:[e.jsx(t,{className:"w-12",children:"#"}),e.jsx(t,{children:"Nom"}),e.jsx(t,{children:"Description"}),e.jsx(t,{children:"Durée"}),e.jsx(t,{children:"Prix"}),e.jsx(t,{children:"Statut"}),e.jsx(t,{children:"Créé par"}),e.jsx(t,{children:"Actions"})]})}),e.jsx(P,{children:s.data.map((r,i)=>e.jsxs(x,{children:[e.jsx(a,{className:"font-medium",children:s.from+i}),e.jsx(a,{className:"font-medium",children:r.name.slice(0,20)}),e.jsx(a,{className:"max-w-[200px] truncate",children:r.description||"-"}),e.jsxs(a,{children:[r.duree_minutes," min"]}),e.jsx(a,{children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(r.prix).replace("$US","$")}),e.jsx(a,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{checked:r.actif,onCheckedChange:c=>b(r.id,c)}),e.jsx(f,{variant:r.actif?"default":"secondary",children:r.actif?"Actif":"Inactif"})]})}),e.jsx(a,{children:r.user?e.jsx(f,{variant:"outline",children:r.user.name}):"-"}),e.jsxs(a,{className:"flex gap-2",children:[e.jsx(p,{href:route("services.show",r.ref),children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsx(p,{href:route("services.edit",r.ref),children:e.jsx(o,{variant:"outline",size:"sm",children:e.jsx(V,{className:"h-4 w-4"})})}),e.jsxs(T,{children:[e.jsx(y,{asChild:!0,children:e.jsx(o,{variant:"destructive",size:"sm",children:e.jsx(W,{className:"h-4 w-4"})})}),e.jsxs(E,{children:[e.jsxs(I,{children:[e.jsx(k,{children:"Êtes-vous sûr ?"}),e.jsx(B,{children:"Cette action supprimera définitivement le service et ne pourra pas être annulée."})]}),e.jsxs(H,{children:[e.jsx($,{children:"Annuler"}),e.jsx(L,{onClick:()=>N(r.ref),children:"Supprimer"})]})]})]})]})]},r.id))})]})}),s.last_page>1&&e.jsx("div",{className:"flex items-center justify-end",children:e.jsx(z,{children:e.jsxs(F,{children:[e.jsx(d,{children:e.jsx(U,{href:s.prev_page_url||"#",onClick:r=>{if(!s.prev_page_url){r.preventDefault();return}r.preventDefault(),l.get(s.prev_page_url,{},{preserveState:!0,replace:!0,preserveScroll:!0})},className:s.prev_page_url?"":"pointer-events-none opacity-50"})}),s.links.slice(1,-1).map((r,i)=>r.label==="..."?e.jsx(d,{children:e.jsx(G,{})},i):e.jsx(d,{children:e.jsx(q,{href:r.url||"#",onClick:c=>{if(!r.url){c.preventDefault();return}c.preventDefault(),l.get(r.url,{},{preserveState:!0,replace:!0,preserveScroll:!0})},isActive:r.active,children:r.label})},i)),e.jsx(d,{children:e.jsx(J,{href:s.next_page_url||"#",onClick:r=>{if(!s.next_page_url){r.preventDefault();return}r.preventDefault(),l.get(s.next_page_url,{},{preserveState:!0,replace:!0,preserveScroll:!0})},className:s.next_page_url?"":"pointer-events-none opacity-50"})})]})})})]})]})}export{ke as default};
