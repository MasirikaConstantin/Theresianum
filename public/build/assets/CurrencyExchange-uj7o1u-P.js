import{r as g,u as k,a as F,t as n,j as e,b as v,H as P}from"./app-BiR3H72c.js";import{B as d}from"./button-DfBT4842.js";import{I as o}from"./input-CBAXjYrY.js";import{L as u}from"./label-C35PAQno.js";import{T as H,a as L,b as f,c,d as U,e as t}from"./table-CMAMKCJS.js";import{d as q}from"./card-CtX8457h.js";import{D as z,a as I,b as M,c as B,d as G,e as O}from"./dialog-C2xpyM_9.js";import{S as R}from"./switch-BTEMsqTc.js";import{P as J}from"./plus-BhylbLjU.js";import{P as K}from"./pencil-BBfKa5zT.js";import{T as Q}from"./trash-2-DAGSehnZ.js";import{A as V}from"./app-layout-DXRwYbWn.js";import"./app-BojVexQw.js";import"./utils-D-KgF5mV.js";import"./index-DufLrpEQ.js";import"./index-CaoPq-lK.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./createLucideIcon-AVJzoGs5.js";import"./breadcrumbs-CfH9HSk2.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-Di7OUUGl.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./badge-NokOUrZG.js";function W({currencies:m}){const[p,x]=g.useState(null),[b,j]=g.useState(!1),{data:i,setData:r,post:C,put:N,delete:_,processing:D,errors:l,reset:S}=k({name:"",code:"",symbol:"",exchange_rate:1,is_active:!0,is_default:!1}),{flash:h}=F().props;h.error&&n.error(h.error),h.success&&n.success(h.success);const T=s=>{x(s.id),r({name:s.name,code:s.code,symbol:s.symbol,exchange_rate:s.exchange_rate,is_active:s.is_active,is_default:s.is_default})},y=s=>{N(route("currencies.update",s),{onSuccess:()=>{n.success("Devise mise à jour avec succès"),x(null)},onError:()=>{n.error("Erreur lors de la mise à jour")}})},E=s=>{_(route("currencies.destroy",s),{onSuccess:()=>{n.success("Devise supprimée avec succès")}})},w=s=>{s.preventDefault(),C(route("currencies.store"),{onSuccess:()=>{n.success("Nouvelle devise ajoutée"),S(),j(!1)},onError:a=>{n.error("Erreur lors de la création")}})},A=(s,a)=>{a?v.patch(route("currencies.set-active",s)):v.patch(route("currencies.set-inactive",s))};return e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex flex-row justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des Taux de Change"}),e.jsxs(z,{open:b,onOpenChange:j,children:[e.jsx(I,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Ajouter une devise"]})}),e.jsxs(M,{children:[e.jsxs(B,{children:[e.jsx(G,{children:"Ajouter une nouvelle devise"}),e.jsx(O,{children:"Ajouter une nouvelle devise"})]}),e.jsxs("form",{onSubmit:w,className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{children:"Nom de la devise"}),e.jsx(o,{value:i.name,onChange:s=>r("name",s.target.value),required:!0}),l.name&&e.jsx("p",{className:"text-red-500 text-sm",children:l.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{children:"Code (3 lettres)"}),e.jsx(o,{value:i.code,onChange:s=>r("code",s.target.value.toUpperCase()),maxLength:3,required:!0}),l.code&&e.jsx("p",{className:"text-red-500 text-sm",children:l.code})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{children:"Symbole"}),e.jsx(o,{value:i.symbol,onChange:s=>r("symbol",s.target.value),required:!0}),l.symbol&&e.jsx("p",{className:"text-red-500 text-sm",children:l.symbol})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{children:"Taux (pour 1 USD)"}),e.jsx(o,{type:"number",step:"0.0001",value:i.exchange_rate,onChange:s=>r("exchange_rate",parseFloat(s.target.value)||0),required:!0}),l.exchange_rate&&e.jsx("p",{className:"text-red-500 text-sm",children:l.exchange_rate})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Annuler"}),e.jsx(d,{type:"submit",disabled:D,children:"Créer la devise"})]})]})]})]})]}),e.jsx(q,{children:e.jsx("div",{className:"rounded-lg border shadow-sm",children:e.jsxs(H,{children:[e.jsx(L,{children:e.jsxs(f,{children:[e.jsx(c,{children:"Nom"}),e.jsx(c,{children:"Code"}),e.jsx(c,{children:"Symbole"}),e.jsx(c,{children:"Taux (1 USD = ?)"}),e.jsx(c,{children:"Statut"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(U,{children:m==null?void 0:m.map(s=>e.jsx(f,{children:p===s.id?e.jsxs(e.Fragment,{children:[e.jsx(t,{children:e.jsx(o,{value:i.name,onChange:a=>r("name",a.target.value)})}),e.jsx(t,{children:e.jsx(o,{value:i.code,onChange:a=>r("code",a.target.value.toUpperCase()),maxLength:3})}),e.jsx(t,{children:e.jsx(o,{value:i.symbol,onChange:a=>r("symbol",a.target.value)})}),e.jsx(t,{children:e.jsx(o,{type:"number",step:"0.0001",value:i.exchange_rate,onChange:a=>r("exchange_rate",parseFloat(a.target.value)||0)})}),e.jsx(t,{}),e.jsxs(t,{className:"flex gap-2",children:[e.jsx(d,{size:"sm",onClick:()=>y(s.id),children:"Enregistrer"}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>x(null),children:"Annuler"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(t,{children:s.name}),e.jsx(t,{children:s.code}),e.jsx(t,{children:s.symbol}),e.jsx(t,{children:s.exchange_rate}),e.jsx(t,{children:e.jsxs(e.Fragment,{children:[e.jsx(R,{checked:s.is_active,onCheckedChange:a=>A(s.id,a)}),s.is_default?"Défaut":s.is_active?"Actif":"Inactif"]})}),e.jsxs(t,{className:"flex gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>T(s),children:e.jsx(K,{className:"h-4 w-4"})}),!s.is_default&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>E(s.id),children:e.jsx(Q,{className:"h-4 w-4 text-red-500"})})]})]})},s.id))})]})})})]})})}function Ae({auth:m,currencies:p}){const x=[{title:"Dashboard",href:"/dashboard"},{title:"Gestion des devises",href:"/settings/currencies"}];return e.jsxs(V,{auth:m,breadcrumbs:x,children:[e.jsx(P,{title:"Gestion des devises"}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsx(W,{currencies:p})})]})}export{Ae as default};
