import{u as g,j as e,H as v,L as S,t as l}from"./app-BiR3H72c.js";import{A as _}from"./app-layout-DXRwYbWn.js";import{B as o}from"./button-DfBT4842.js";import{L as u}from"./label-C35PAQno.js";import{I as d}from"./input-CBAXjYrY.js";import{S as b,a as N,b as C,c as q,d as y}from"./select-B5KxOem9.js";import{C as F}from"./combobox-DAyAHdCa.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./badge-NokOUrZG.js";import"./index-DufLrpEQ.js";import"./index-BdQq_4o_.js";import"./index-Di7OUUGl.js";import"./check-DVZ7LPyx.js";import"./command-DS8EqxGi.js";import"./search-D5WKme3c.js";import"./popover-B0R-MFpt.js";function oe({auth:n,stock:r,produits:c,succursales:m}){const{data:s,setData:a,post:p,put:x,processing:h,errors:i}=g({produit_id:(r==null?void 0:r.produit_id)||"",succursale_id:(r==null?void 0:r.succursale_id)||"",quantite:(r==null?void 0:r.quantite)||0,seuil_alerte:(r==null?void 0:r.seuil_alerte)||5}),j=[{title:"Dashboard",href:"/dashboard"},{title:"Stocks par Branche",href:"/stock-succursales"},{title:r?"Modifier Stock":"Créer Stock",href:"#"}],f=t=>{t.preventDefault(),r?x(route("stock-succursales.update",r.ref),{onSuccess:()=>l.success("Stock mis à jour avec succès"),onError:()=>l.error("Une erreur est survenue")}):p(route("stock-succursales.store"),{onSuccess:()=>l.success("Stock créé avec succès"),onError:()=>l.error("Une erreur est survenue")})};return e.jsxs(_,{auth:n,breadcrumbs:j,children:[e.jsx(v,{title:r?"Modifier Stock":"Créer Stock"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:r?"Modifier le Stock":"Créer un Nouveau Stock"}),e.jsx(S,{href:route("stock-succursales.index"),children:e.jsx(o,{variant:"outline",children:"Retour à la liste"})})]}),e.jsxs("form",{onSubmit:f,className:"grid gap-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"produit_id",children:"Produit"}),e.jsx(F,{options:c.map(t=>({value:t.id.toString(),label:`${t.name}${t.type==="a_utiliser"?" (Accessoire)":""}`})),value:s.produit_id,onChange:t=>a("produit_id",t),disabled:!!r,placeholder:"Sélectionner un produit",searchPlaceholder:"Rechercher un produit...",emptyText:"Aucun produit trouvé"}),i.produit_id&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:i.produit_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"succursale_id",children:"Branche"}),e.jsxs(b,{value:s.succursale_id,onValueChange:t=>a("succursale_id",t),disabled:!!r,children:[e.jsx(N,{children:e.jsx(C,{placeholder:"Sélectionner une succursale"})}),e.jsx(q,{children:m.map(t=>e.jsx(y,{value:t.id.toString(),children:t.nom},t.id))})]}),i.succursale_id&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:i.succursale_id})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"quantite",children:"Quantité en stock"}),e.jsx(d,{id:"quantite",type:"number",min:"0",value:s.quantite,onChange:t=>a("quantite",parseInt(t.target.value))}),i.quantite&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:i.quantite})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"seuil_alerte",children:"Seuil d'alerte"}),e.jsx(d,{id:"seuil_alerte",type:"number",min:"1",value:s.seuil_alerte,onChange:t=>a("seuil_alerte",parseInt(t.target.value))}),i.seuil_alerte&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:i.seuil_alerte})]})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(o,{type:"submit",disabled:h,children:r?"Mettre à jour":"Créer"})})]})]})]})}export{oe as default};
