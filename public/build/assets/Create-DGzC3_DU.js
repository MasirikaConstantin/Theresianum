import{j as e,H as p,L as S,u as w,r as u,t as x}from"./app-BiR3H72c.js";import"./app-BojVexQw.js";function z({children:r,title:i}){return e.jsxs("div",{className:"min-h-screen bg-accent",children:[e.jsxs(p,{children:[e.jsx("title",{children:i||"Prendre Rendez-vous"}),e.jsx("meta",{name:"description",content:"Prenez rendez-vous dans notre salon"})]}),e.jsx("div",{className:"navbar bg-base-100 shadow-lg",children:e.jsxs("div",{className:"container mx-auto flex justify-between items-center",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("a",{href:"/",className:"btn btn-ghost normal-case text-xl",children:[e.jsx("span",{className:"text-primary",children:"Bella Hair"}),"Makeup"]})}),e.jsx("div",{className:"flex-none",children:e.jsx(S,{href:"#",className:"btn btn-outline btn-sm",children:"Espace Client"})})]})}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:r}),e.jsx("footer",{className:"footer footer-center p-10 bg-primary text-base-100",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold",children:["Bella Hair ",e.jsx("br",{}),"Prenez rendez-vous en ligne facilement"]}),e.jsxs("p",{children:["Copyright © ",new Date().getFullYear()," - Tous droits réservés"]})]})})]})}function P({succursales:r,services:i}){const{data:l,setData:n,post:j,processing:c,errors:a,reset:h}=w({succursale_id:"",date_rdv:"",heure_debut:"",telephone:"",nom:"",prenom:"",email:"",date_naissance:"",heure_fin:"",notes:"",services:[]}),[t,b]=u.useState([]),[N,v]=u.useState(!1),g=s=>{const d=t.includes(s)?t.filter(m=>m!==s):[...t,s];b(d),n("services",d)},f=s=>{if(s.preventDefault(),t.length===0){x.error("Veuillez sélectionner au moins un service");return}if(!l.succursale_id||!l.date_rdv||!l.heure_debut||!l.nom||!l.telephone){console.log("Champs manquants");return}console.log(l),j(route("rendezvous.store"),{onSuccess:()=>{h(),x.success("Votre rendez-vous a été bien enregistré. Vous serez contacté d'ici peu pour validation."),v(!0),h(),o()},onError:()=>{x.error("Une erreur est survenue")}})},y=s=>{s.preventDefault();const d=document.getElementById("my_modal_4");d==null||d.showModal()},o=()=>{const s=document.getElementById("my_modal_4");s==null||s.close()},_=()=>{n("services",t),o()};return e.jsxs(z,{title:"Prendre Rendez-vous",children:[e.jsxs(p,{children:[e.jsx("title",{children:"Prendre Rendez-vous"}),e.jsx("meta",{name:"description",content:"Prenez rendez-vous dans notre salon"}),e.jsx("link",{href:"https://cdn.jsdelivr.net/npm/daisyui@5",rel:"stylesheet",type:"text/css"}),e.jsx("script",{src:"https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"}),e.jsx("link",{href:"https://cdn.jsdelivr.net/npm/daisyui@5/themes.css",rel:"stylesheet",type:"text/css"})]}),e.jsxs("div",{className:"card bg-base-100 shadow-xl max-w-3xl mx-auto",children:[N&&e.jsxs("div",{role:"alert",className:"alert alert-success m-4",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 shrink-0 stroke-current",fill:"none",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"Votre rendez-vous a été bien enregistré. Vous serez contacté d'ici peu pour validation."}),e.jsx("span",{children:"Merci pour votre Fidelité."})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("h1",{className:"card-title text-3xl mb-6",children:"Prendre un rendez-vous"}),e.jsx("div",{className:"divider text-lg font-medium",children:"Informations Salon"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Salon"})}),e.jsxs("select",{className:"select select-bordered w-full",value:l.succursale_id,onChange:s=>n("succursale_id",s.target.value),required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Sélectionnez un salon"}),r==null?void 0:r.map(s=>e.jsxs("option",{value:s.id,children:[s.nom," - ",s.adresse.slice(0,20),"..."]},s.id))]}),l.succursale_id&&e.jsx("div",{className:"mt-3 p-3 bg-base-100 border border-base-300 rounded-box",children:(r==null?void 0:r.find(s=>s.id.toString()===l.succursale_id.toString()))&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-medium",children:r.find(s=>s.id.toString()===l.succursale_id.toString()).nom}),e.jsx("p",{className:"text-sm opacity-75",children:r.find(s=>s.id.toString()===l.succursale_id.toString()).adresse})]})}),a.succursale_id&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.succursale_id})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date du rendez-vous"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",min:new Date().toISOString().split("T")[0],value:l.date_rdv,onChange:s=>n("date_rdv",s.target.value),required:!0}),a.date_rdv&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.date_rdv})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Heure du rendez-vous"})}),e.jsxs("select",{className:"select select-bordered w-full",value:l.heure_debut,onChange:s=>{n("heure_debut",s.target.value);const m=`${(parseInt(s.target.value.slice(0,2))+1).toString().padStart(2,"0")}:00`;n("heure_fin",m)},required:!0,children:[e.jsx("option",{disabled:!0,value:"",children:"Sélectionnez une heure"}),e.jsx("option",{value:"09:00",children:"09:00 - 10:00"}),e.jsx("option",{value:"10:00",children:"10:00 - 11:00"}),e.jsx("option",{value:"11:00",children:"11:00 - 12:00"}),e.jsx("option",{value:"14:00",children:"14:00 - 15:00"}),e.jsx("option",{value:"15:00",children:"15:00 - 16:00"}),e.jsx("option",{value:"16:00",children:"16:00 - 17:00"})]}),e.jsx("input",{type:"hidden",name:"heure_fin",value:l.heure_debut.slice(0,5)}),a.heure_debut&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.heure_debut})})]}),e.jsx("div",{className:"divider text-lg font-medium",children:"Informations Client"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label",children:[e.jsx("span",{className:"label-text",children:"Nom"})," ",e.jsx("span",{className:"label-text-alt text-error",children:"*"})]}),e.jsx("input",{type:"text",className:"input input-bordered w-full",value:l.nom,onChange:s=>n("nom",s.target.value),required:!0}),a.nom&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.nom})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Email (optionnel)"})}),e.jsx("input",{type:"email",className:"input input-bordered w-full",value:l.email,onChange:s=>n("email",s.target.value)}),a.email&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.email})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsxs("label",{className:"label",children:[e.jsx("span",{className:"label-text",children:"Téléphone "})," ",e.jsx("span",{className:"label-text-alt text-error",children:"*"})]}),e.jsx("input",{type:"tel",className:"input input-bordered w-full",value:l.telephone,onChange:s=>n("telephone",s.target.value),required:!0}),a.telephone&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.telephone})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Date de naissance (optionnel)"})}),e.jsx("input",{type:"date",className:"input input-bordered w-full",value:l.date_naissance,onChange:s=>n("date_naissance",s.target.value)}),a.date_naissance&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.date_naissance})})]})]})]}),e.jsx("div",{className:"divider text-lg font-medium",children:"Services souhaités"}),e.jsx("button",{type:"button",className:"btn",onClick:y,children:t.length>0?`${t.length} service(s) sélectionné(s)`:"Sélectionner les services"}),t.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:i==null?void 0:i.filter(s=>t.includes(s.id.toString())).map(s=>e.jsx("div",{className:"card bg-base-100 border border-base-300 rounded-box p-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"font-medium break-words",children:s.name}),e.jsx("div",{className:"text-sm",children:e.jsxs("span",{className:"opacity-75",children:["Durée: ",s.duree," min - Prix: ",s.prix,"$"]})}),s.description&&e.jsx("div",{className:"text-xs text-gray-500 break-words",children:s.description})]})},s.id))}),e.jsx("dialog",{id:"my_modal_4",className:"modal",children:e.jsxs("div",{className:"modal-box w-11/12 max-w-5xl",children:[e.jsx("h3",{className:"font-bold text-lg",children:"Services"}),e.jsx("p",{className:"py-4",children:"Sélectionner les services"}),e.jsxs("div",{className:"form-control mb-3",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i==null?void 0:i.map(s=>e.jsx("div",{className:"card bg-base-100 border border-base-300 rounded-box p-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"checkbox checkbox-primary flex-shrink-0",checked:t.includes(s.id.toString()),onChange:()=>g(s.id.toString())}),e.jsx("span",{className:"font-medium break-words",children:s.name})]}),e.jsx("div",{className:"text-sm pl-8",children:e.jsxs("span",{className:"opacity-75",children:["Durée: ",s.duree," min - Prix: ",s.prix,"$"]})}),s.description&&e.jsx("div",{className:"text-xs text-gray-500 break-words pl-8",children:s.description})]})},s.id))}),a.services&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:a.services})})]}),e.jsx("div",{className:"modal-action",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",className:"btn",onClick:o,children:"Annuler"}),e.jsxs("button",{type:"button",className:"btn btn-primary",onClick:_,children:["Confirmer (",t.length,")"]})]})})]})}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Notes supplémentaires (optionnel)"})}),e.jsx("textarea",{className:"textarea textarea-bordered h-24",value:l.notes,onChange:s=>n("notes",s.target.value),placeholder:"Précisez vos besoins..."})]}),e.jsx("div",{className:"card-actions justify-end mt-8",children:e.jsx("button",{type:"submit",className:`btn btn-primary ${c?"loading":""}`,disabled:c,children:c?"":"Confirmer le rendez-vous"})})]})]})]})]})}export{P as default};
