import{j as e,H as b,L as i}from"./app-BiR3H72c.js";import{A as y}from"./app-layout-DXRwYbWn.js";import{B as t}from"./button-DfBT4842.js";import{B as N}from"./badge-NokOUrZG.js";import{C as d,a as m,b as o,d as x}from"./card-CtX8457h.js";import{T as v,a as w,b as g,c as l,d as _,e as n}from"./table-CMAMKCJS.js";import{C as T}from"./chevron-left-CImlN05b.js";import{P as C}from"./printer-BiZH-sr0.js";import{E as h}from"./eye-xwMsSdsH.js";import{f as D}from"./format-B6qNwQQI.js";import{f as S}from"./fr-CLbTb0XB.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";const $=c=>[{title:"Dashboard",href:"/dashboard"},{title:"Ventes",href:"/ventes"},{title:`Vente ${c}`,href:"#"}];function ce({auth:c,vente:s,montant_produits_ttc:F,tva:R}){var u,p,j;return e.jsxs(y,{auth:c,breadcrumbs:$(s.code),children:[e.jsx(b,{title:`Détails de la vente ${s.code}`}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{href:route("ventes.index"),children:e.jsx(t,{variant:"outline",size:"icon",children:e.jsx(T,{className:"h-4 w-4"})})}),e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Détails de la vente ",s.code]})]}),e.jsx("a",{href:route("ventes.print",s.id),target:"_blank",children:e.jsxs(t,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-4 w-4"})," Imprimer"]})})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(d,{children:[e.jsx(m,{children:e.jsx(o,{children:"Informations générales"})}),e.jsxs(x,{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Client"}),e.jsx(i,{href:route("clients.show",s.client.ref),children:e.jsxs(t,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"})," ",((u=s.client)==null?void 0:u.name)||"Aucun client"]})})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Branche"}),e.jsx(i,{href:route("succursales.show",s.succursale.ref),children:e.jsxs(t,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"})," ",((p=s.succursale)==null?void 0:p.nom)||"Aucune branche"]})})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Vendeur"}),e.jsx(i,{href:route("utilisateurs.show",s.vendeur.ref),children:e.jsxs(t,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-4 w-4"})," ",((j=s.vendeur)==null?void 0:j.name)||"Inconnu"]})})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date"}),e.jsx("p",{children:D(new Date(s.created_at),"PPPp",{locale:S})})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Mode de paiement"}),e.jsx(N,{variant:"outline",children:s.mode_paiement})]})]})]})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsx(o,{children:"Détails des articles"})}),e.jsx(x,{children:e.jsxs(v,{children:[e.jsx(w,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Type"}),e.jsx(l,{children:"Nom"}),e.jsx(l,{children:"Quantité"}),e.jsx(l,{children:"Prix unitaire"}),e.jsx(l,{children:"Total"})]})}),e.jsx(_,{children:s.items.map(r=>{var a,f;return e.jsxs(g,{children:[e.jsx(n,{children:e.jsx(N,{variant:r.produit_id?"default":"secondary",children:r.produit_id?"Produit":"Service"})}),e.jsx(n,{children:((a=r.produit)==null?void 0:a.name)||((f=r.service)==null?void 0:f.name)}),e.jsx(n,{children:r.quantite}),e.jsx(n,{children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(r.prix_unitaire).replace("$US","$ ")}),e.jsx(n,{children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(r.montant_total).replace("$US","$ ")})]},r.id)})})]})})]}),e.jsxs(d,{children:[e.jsx(m,{children:e.jsx(o,{children:"Récapitulatif"})}),e.jsxs(x,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-sm font-medium",children:"Total articles"}),e.jsx("p",{className:"font-medium",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(s.items.reduce((r,a)=>r+a.prix_unitaire*a.quantite,0)).replace("$US","$ ")})]}),e.jsx("div",{className:"flex justify-between items-center"}),e.jsxs("div",{className:"flex justify-between items-center border-t pt-2 mt-2",children:[e.jsx("p",{className:"text-lg font-bold",children:"Montant total"}),e.jsx("p",{className:"text-lg font-bold",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(s.montant_total).replace("$US","$ ")})]})]})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(i,{href:route("ventes.index"),children:e.jsx(t,{variant:"outline",children:"Retour"})})})]})]})]})}export{ce as default};
