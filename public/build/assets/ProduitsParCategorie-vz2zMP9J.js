import{r as k,j as e,H as F}from"./app-BiR3H72c.js";import{A as q,B as A}from"./app-layout-DXRwYbWn.js";import{T as m}from"./index-CtBsO7PD.js";import{C as t,a,b as r,d as i,c as N}from"./card-CtX8457h.js";import{B}from"./badge-NokOUrZG.js";import{P as M}from"./progress-CdY97wPc.js";import{P as R}from"./package-CMie0C_N.js";import{S as g}from"./shopping-cart-CtXjzZ1W.js";import{D as v}from"./dollar-sign-rcGCAktf.js";import{T as D}from"./triangle-alert-5Oq9jqv_.js";import{R as h,C as y,X as b,Y as w,T as j,B as p,L,a as $}from"./generateCategoricalChart-ClOP-bqC.js";import{B as _}from"./BarChart-CLEOG6BU.js";import{c as K}from"./createLucideIcon-AVJzoGs5.js";import{P as z,a as E}from"./PieChart-FoGQmK1M.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./index-CaoPq-lK.js";import"./button-DfBT4842.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./circle-alert-CxFuhzFA.js";import"./index-iIYnk3p_.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],U=K("Layers",V),H=[{title:"Tableau de bord",href:m("dashboard")},{title:"Statistiques",href:m("statistiques.index")},{title:"Produits par Catégorie",href:m("statistiques.produits-par-categorie")}],C=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"];function _e({auth:P,categories:u,statsGlobales:c,statsParCategorie:o}){const[n,S]=k.useState(u[0]||null),l=n?o.find(s=>s.categorie_id===n.id):null,x=s=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(s).replace("$US","$ "),T=o.map(s=>({name:s.categorie_nom,ventes:s.total_ventes,chiffre_affaire:x(s.chiffre_affaire)})),f=o.map(s=>({name:s.categorie_nom,value:s.total_produits}));return e.jsxs(q,{auth:P,breadcrumbs:H,children:[e.jsx(F,{title:"Statistiques Produits par Catégorie"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Statistiques Produits par Catégorie"})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Produits"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.totalProduits}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Toutes catégories"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Total Ventes"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.totalVentes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unités vendues"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Montant vendue"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[x(parseFloat(c.chiffreAffaire))," "]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total généré"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Produits en Rupture"}),e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.produitsEnRupture}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Nécessitent réapprovisionnement"})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs(t,{className:"lg:col-span-1",children:[e.jsxs(a,{children:[e.jsx(r,{children:"Catégories"}),e.jsx(N,{children:"Sélectionnez une catégorie pour voir ses statistiques"})]}),e.jsx(i,{children:e.jsx("div",{className:"space-y-2",children:u.map(s=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all hover:bg-accent ${(n==null?void 0:n.id)===s.id?"bg-accent border-primary":"border-transparent"}`,onClick:()=>S(s),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s.nom}),e.jsx(B,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description})]},s.id))})})]}),e.jsxs(t,{className:"lg:col-span-2",children:[e.jsxs(a,{children:[e.jsx(r,{children:n?`Statistiques - ${n.nom}`:"Sélectionnez une catégorie"}),e.jsx(N,{children:(n==null?void 0:n.description)||"Détails des performances de la catégorie"})]}),e.jsx(i,{children:l?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Produits"}),e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.total_produits}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total dans cette catégorie"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Ventes"}),e.jsx(g,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.total_ventes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Unités vendues"})]})]}),e.jsxs(t,{children:[e.jsxs(a,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(r,{className:"text-sm font-medium",children:"Montant vendue"}),e.jsx(v,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[x(l.chiffre_affaire)," "]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total généré"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(r,{className:"text-sm",children:"État du Stock"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Stock moyen"}),e.jsx("span",{className:"font-medium",children:l.stock_moyen})]}),e.jsx(M,{value:l.stock_moyen/Math.max(l.stock_moyen,100)*100}),e.jsxs("div",{className:"flex justify-between text-sm mt-4",children:[e.jsx("span",{children:"Produits en alerte"}),e.jsx("span",{className:"font-medium text-destructive",children:l.produits_en_alerte})]})]})})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(r,{className:"text-sm",children:"Performance"})}),e.jsx(i,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Taux de vente"}),e.jsxs("span",{className:"font-medium",children:[(l.total_ventes/Math.max(l.total_produits,1)*100).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Marge moyenne"}),e.jsx("span",{className:"font-medium text-green-600",children:x(l.marge_moyenne)})]})]})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(r,{className:"text-sm",children:"Top Produits"})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-2",children:l.top_produits.slice(0,5).map((s,d)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"truncate",children:[d+1,". ",s.nom.length>10?s.nom.slice(0,20)+"...":s.nom]}),e.jsxs("span",{className:"font-medium",children:[s.ventes," ventes"]})]},s.id))})})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(r,{className:"text-sm",children:"Évolution Mensuelle"})}),e.jsx(i,{children:e.jsx("div",{className:"h-[200px]",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(_,{data:l.evolution_mensuelle,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"mois"}),e.jsx(w,{}),e.jsx(j,{}),e.jsx(p,{dataKey:"ventes",fill:"#0088FE"})]})})})})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(U,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Sélectionnez une catégorie pour voir ses statistiques détaillées"})]})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(r,{children:"Ventes par Catégorie"})}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(_,{data:T,children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(b,{dataKey:"name"}),e.jsx(w,{}),e.jsx(j,{}),e.jsx(L,{}),e.jsx(p,{dataKey:"ventes",fill:"#8884d8",name:"Nombre de ventes"}),e.jsx(p,{dataKey:"chiffre_affaire",fill:"#82ca9d",name:"Montant vendue ($)"})]})})})})]}),e.jsxs(t,{children:[e.jsx(a,{children:e.jsx(r,{children:"Répartition des Produits"})}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(z,{children:[e.jsx(E,{data:f,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:s,percent:d})=>`${s} (${(d*100).toFixed(0)}%)`,children:f.map((s,d)=>e.jsx($,{fill:C[d%C.length]},`cell-${d}`))}),e.jsx(j,{})]})})})})]})]})]})]})}export{_e as default};
