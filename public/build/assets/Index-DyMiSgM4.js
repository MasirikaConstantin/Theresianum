import{j as e,H as R,b as f}from"./app-BiR3H72c.js";import{C as l,a as c,b as n,d}from"./card-CtX8457h.js";import{C as j,a as b,b as g}from"./chart-D6TfAjJB.js";import{A as q}from"./app-layout-DXRwYbWn.js";import{P as B}from"./product-service-chart-KYeLW1vc.js";import{B as G}from"./button-DfBT4842.js";import{S as _,a as z,b as M,c as P,d as C}from"./select-B5KxOem9.js";import{M as S}from"./example-date-picker-CijpV8RP.js";import{L as H}from"./label-C35PAQno.js";import{RevenueTableWithPagination as K}from"./RevenueTable-BEbwswFV.js";import{c as V}from"./createLucideIcon-AVJzoGs5.js";import{R as y,X as v,Y as k,C as N,L as X,B as I}from"./generateCategoricalChart-ClOP-bqC.js";import{A as U,a as W}from"./AreaChart-uj0_NxdG.js";import{B as Y}from"./BarChart-CLEOG6BU.js";import"./app-BojVexQw.js";import"./utils-D-KgF5mV.js";import"./breadcrumbs-CfH9HSk2.js";import"./index-CaoPq-lK.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./badge-NokOUrZG.js";import"./index-BdQq_4o_.js";import"./index-Di7OUUGl.js";import"./check-DVZ7LPyx.js";import"./calendar-Bm37FrpH.js";import"./DayPicker-BNzRSgUN.js";import"./format-B6qNwQQI.js";import"./chevron-left-CImlN05b.js";import"./popover-B0R-MFpt.js";import"./fr-CLbTb0XB.js";import"./index-DufLrpEQ.js";import"./table-CMAMKCJS.js";import"./pagination-3fOkAI-N.js";import"./scroll-area-iQk4GMsN.js";import"./index-C-wqcDA1.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]],J=V("FilterX",E);function Ie({auth:m,succursales:p,filters:o,ventesData:w,ventesParSuccursale:F,employesStats:L,pointagesStats:O,congesStats:D,depensesStats:Q}){const i=t=>{f.get(route("statistiques.index"),{...o,...t},{preserveState:!0,replace:!0})},$=()=>{f.get(route("statistiques.index"),{},{preserveState:!0,replace:!0})},x=Object.entries(w).map(([t,s])=>({date:t,total:Number(parseFloat(s).toFixed(2))})),h=Object.entries(F).map(([t,s])=>{const a=p.find(r=>r.id===Number(t));return{name:(a==null?void 0:a.nom)||`Branche ${t}`,data:Object.entries(s).map(([r,A])=>({date:r,total:Number(parseFloat(A).toFixed(2))}))}});Object.entries(L).map(([t,s])=>({name:t.charAt(0).toUpperCase()+t.slice(1),value:s})),Object.entries(O).map(([t,s])=>({name:t.charAt(0).toUpperCase()+t.slice(1),value:s})),Object.entries(D).map(([t,s])=>({name:t.charAt(0).toUpperCase()+t.slice(1),value:s}));const T=[{title:"Dashboard",href:"/dashboard"},{title:"Statistiques",href:"/statistiques"}],u={};return e.jsxs(q,{auth:m,breadcrumbs:T,children:[e.jsx(R,{title:"Statistiques"}),e.jsxs("div",{className:"container p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Tableau de bord des statistiques"}),e.jsxs(l,{className:"mb-6",children:[e.jsx(c,{children:e.jsx(n,{children:"Filtres"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{htmlFor:"succursale",children:"Succursale"}),e.jsxs(_,{value:o.succursale||"all",onValueChange:t=>i({succursale:t==="all"?void 0:t}),children:[e.jsx(z,{children:e.jsx(M,{placeholder:"Toutes les succursales"})}),e.jsxs(P,{children:[e.jsx(C,{value:"all",children:"Toutes les succursales"}),p.map(t=>e.jsx(C,{value:String(t.id),children:t.nom},t.id))]})]})]}),e.jsx(S,{label:"Date de début",className:"mt-0",value:o.date_debut||"",onChange:t=>i({date_debut:t})}),e.jsx(S,{label:"Date de fin",className:"mt-0",value:o.date_fin||"",onChange:t=>i({date_fin:t})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(G,{onClick:$,variant:"outline",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Réinitialiser"]})})]})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-full md:w-1/3",children:e.jsx(K,{data:x})}),e.jsx("div",{className:"w-full md:w-2/3 space-y-6 ",children:e.jsxs(l,{className:"mb-6",children:[e.jsx(c,{children:e.jsx(n,{children:"Évolution des ventes"})}),e.jsx(d,{className:"h-[400px] pl-2",children:e.jsx(y,{width:"100%",height:"100%",children:e.jsx(j,{style:{width:"100%",height:"100%"},config:u,className:"aspect-auto h-[250px] w-full",children:e.jsxs(U,{data:x,margin:{top:10,right:30,left:20,bottom:30},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorTotal",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:.1})]})}),e.jsx(v,{dataKey:"date",tick:{fill:"#6b7280",fontSize:12},tickLine:{stroke:"#e5e7eb"},axisLine:{stroke:"#e5e7eb"},tickFormatter:t=>new Date(t).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})}),e.jsx(k,{tick:{fill:"#6b7280",fontSize:12},tickLine:{stroke:"#e5e7eb"},axisLine:{stroke:"#e5e7eb"},tickFormatter:t=>`$${t.toLocaleString()}`,domain:[0,t=>Math.ceil(t/1e3)*1e3],width:80}),e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb",vertical:!1}),e.jsx(b,{content:e.jsx(g,{labelFormatter:t=>e.jsx("span",{className:"text-gray-500 font-medium",children:new Date(t).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})}),valueFormatter:t=>[`$${Number(t).toLocaleString()}`,"Total des ventes"],className:"bg-white shadow-lg border border-gray-200 rounded-md p-3"})}),e.jsx(W,{type:"monotone",dataKey:"total",stroke:"#3b82f6",strokeWidth:2,fillOpacity:1,fill:"url(#colorTotal)",activeDot:{r:6,stroke:"#1d4ed8",strokeWidth:2,fill:"#ffffff"}})]})})})})]})})]}),e.jsxs(l,{className:"mb-6",children:[e.jsx(c,{children:e.jsx(n,{children:"Ventes par succursale"})}),e.jsx(d,{className:"h-[400px] pl-2",children:e.jsx(y,{width:"100%",height:"100%",children:e.jsx(j,{style:{width:"100%",height:"100%"},config:u,className:"aspect-auto h-[250px] w-full",children:e.jsxs(Y,{data:h.flatMap(t=>t.data.map(s=>({date:s.date,[t.name]:s.total}))),margin:{top:10,right:30,left:20,bottom:30},layout:"vertical",children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorSuccursale1",x1:"0",y1:"0",x2:"100%",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:.2})]}),e.jsxs("linearGradient",{id:"colorSuccursale2",x1:"0",y1:"0",x2:"100%",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#10b981",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#10b981",stopOpacity:.2})]}),e.jsxs("linearGradient",{id:"colorSuccursale3",x1:"0",y1:"0",x2:"100%",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#ef4444",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444",stopOpacity:.2})]}),e.jsxs("linearGradient",{id:"colorSuccursale4",x1:"0",y1:"0",x2:"100%",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#f59e0b",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#f59e0b",stopOpacity:.2})]}),e.jsxs("linearGradient",{id:"colorSuccursale5",x1:"0",y1:"0",x2:"100%",y2:"0",children:[e.jsx("stop",{offset:"0%",stopColor:"#8b5cf6",stopOpacity:.8}),e.jsx("stop",{offset:"100%",stopColor:"#8b5cf6",stopOpacity:.2})]})]}),e.jsx(N,{strokeDasharray:"3 3",stroke:"#e5e7eb",horizontal:!0,vertical:!1}),e.jsx(v,{type:"number",tick:{fill:"#6b7280",fontSize:12},tickLine:{stroke:"#e5e7eb"},axisLine:{stroke:"#e5e7eb"},tickFormatter:t=>`$${t.toLocaleString()}`}),e.jsx(k,{dataKey:"date",type:"category",tick:{fill:"#6b7280",fontSize:12},tickLine:{stroke:"#e5e7eb"},axisLine:{stroke:"#e5e7eb"},tickFormatter:t=>new Date(t).toLocaleDateString("fr-FR",{day:"numeric",month:"short"}),width:100}),e.jsx(b,{content:e.jsx(g,{labelFormatter:t=>e.jsx("span",{className:"text-gray-500 font-medium",children:new Date(t).toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"})}),valueFormatter:(t,s)=>[`$${Number(t).toLocaleString()}`,s],className:"bg-white shadow-lg border border-gray-200 rounded-md p-3"})}),e.jsx(X,{content:({payload:t})=>e.jsx("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:t==null?void 0:t.map((s,a)=>{var r;return e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 mr-2 rounded-sm",style:{backgroundColor:s.color,background:(r=s.color)!=null&&r.includes("url")?`linear-gradient(to right, ${s.color==="url(#colorSuccursale1)"?"#3b82f6":s.color==="url(#colorSuccursale2)"?"#10b981":s.color==="url(#colorSuccursale3)"?"#ef4444":s.color==="url(#colorSuccursale4)"?"#f59e0b":"#8b5cf6"}, 
                                                ${s.color==="url(#colorSuccursale1)"?"#3b82f680":s.color==="url(#colorSuccursale2)"?"#10b98180":s.color==="url(#colorSuccursale3)"?"#ef444480":s.color==="url(#colorSuccursale4)"?"#f59e0b80":"#8b5cf680"})`:s.color}}),e.jsx("span",{className:"text-sm text-gray-600",children:s.value})]},`legend-${a}`)})})}),h.map((t,s)=>e.jsx(I,{dataKey:t.name,stackId:"a",fill:`url(#colorSuccursale${s+1})`,radius:[0,4,4,0]},t.name))]})})})})]}),e.jsx("div",{className:"mb-6",children:e.jsx(B,{auth:m})})]})]})}export{Ie as default};
