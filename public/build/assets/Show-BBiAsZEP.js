import{u as v,t as h,j as e,H as w,L as d,b as C}from"./app-BiR3H72c.js";import{A as S}from"./app-layout-DXRwYbWn.js";import{B as n}from"./button-DfBT4842.js";import{B as y}from"./badge-NokOUrZG.js";import{L as a}from"./index-DufLrpEQ.js";import{S as k,a as B,b as F,c as _,e as D,f as L,d as R}from"./select-B5KxOem9.js";import{C as A,a as E,b as $}from"./clock-1-B0Iih7mW.js";import{X as O}from"./breadcrumbs-CfH9HSk2.js";import{C as T}from"./check-DVZ7LPyx.js";import{C as p}from"./calendar-CQ4TJ2Ye.js";import{C as U}from"./clock-CK8e-of5.js";import{U as H}from"./user-DHHjb7AF.js";import{B as M}from"./building-CL3OeaQN.js";import{f as P}from"./format-B6qNwQQI.js";import{f as V}from"./fr-CLbTb0XB.js";import"./app-BojVexQw.js";import"./index-C4BIJOdj.js";import"./index-DL4BAlbN.js";import"./index-CaoPq-lK.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./createLucideIcon-AVJzoGs5.js";import"./utils-D-KgF5mV.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./index-BdQq_4o_.js";import"./index-Di7OUUGl.js";import"./index-D-SBhKFM.js";import"./index-DZGh8cYj.js";import"./chevron-right-F_DONt-v.js";const X=[{title:"Dashboard",href:"/dashboard"},{title:"Rendez-vous",href:"/rendezvous"},{title:"Détails du rendez-vous",href:"#"}],m={en_attente:{icon:$,color:"bg-amber-200 text-amber-800",label:"En Attente"},confirmé:{icon:T,color:"bg-green-100 text-green-800",label:"Confirmé"},annulé:{icon:O,color:"bg-red-100 text-red-800",label:"Annulé"},terminé:{icon:E,color:"bg-blue-100 text-blue-800",label:"Terminé"},"no-show":{icon:A,color:"bg-yellow-100 text-yellow-800",label:"No-show"}};function Se({rendezvous:s,services:o,auth:i,flash:l}){var x;const{processing:u}=v({}),c=m[s.statut],j=o.reduce((t,r)=>t+parseFloat(r.prix),0),f=s.statut==="confirmé"&&i.user.role==="admin",g=i.user.role==="admin"||i.user.role==="gerant",N=s.statut==="confirmé"||s.statut==="en_attente"||s.statut==="no-show";l.error&&h.error(l.error),l.success&&h.success(l.success);const b=t=>{C.post(route("rendezvous.update-status",s.id),{statut:t,preserveScroll:!0})};return e.jsxs(S,{auth:i,breadcrumbs:X,children:[e.jsx(w,{title:"Rendez-vous "}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Détails du rendez-vous"}),e.jsxs("div",{className:"flex items-center gap-4",children:[N&&e.jsx(e.Fragment,{children:g&&e.jsxs(k,{value:s.statut,onValueChange:b,disabled:u,children:[e.jsx(B,{className:"w-[180px]",children:e.jsx(F,{placeholder:"Statut"})}),e.jsx(_,{children:e.jsxs(D,{children:[e.jsx(L,{children:"Modifier le statut"}),Object.keys(m).map(t=>{const r=m[t];return e.jsx(R,{value:t,children:e.jsxs("div",{className:`inline-flex items-center rounded px-2 py-1 text-xs font-semibold ${r.color}`,children:[e.jsx(r.icon,{className:"h-3 w-3 mr-1"}),r.label]})},t)})]})})]})}),e.jsx(d,{href:route("rendezvous.index"),children:e.jsx(n,{variant:"outline",children:"Retour à la liste"})})]})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-full",children:e.jsx(p,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Rendez-vous "}),e.jsxs(y,{className:`${c.color} gap-2 mt-1`,children:[e.jsx(c.icon,{className:"h-3 w-3"}),c.label]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{className:"text-sm font-medium",children:"Date et heure"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4"}),P(new Date(s.date_rdv),"PP",{locale:V})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{className:"text-sm font-medium",children:"Durée"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4"}),s.heure_debut.slice(0,5)," - ",s.heure_fin.slice(0,5)]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{className:"text-sm font-medium",children:"Total"}),e.jsxs("div",{className:"flex items-center gap-2",children:[parseFloat(j).toFixed(2)," $"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{className:"text-sm font-medium",children:"Client"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx(n,{asChild:!0,variant:"link",children:e.jsx(d,{href:route("clients.show",s.client.ref),children:((x=s.client)==null?void 0:x.name)||"Non spécifié"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{className:"text-sm font-medium",children:"Branche"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),s.succursale.nom]})]})]}),s.notes&&e.jsxs("div",{className:"grid gap-2",children:[e.jsx(a,{className:"text-sm font-medium",children:"Notes"}),e.jsx("div",{className:"p-4 bg-muted/50 rounded-lg",children:s.notes})]})]})]}),e.jsxs("div",{className:"border rounded-lg",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsxs("h3",{className:"font-medium",children:["Services  (",JSON.parse(s.services).length,") "]})}),e.jsx("div",{className:"divide-y",children:o.map(t=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsx("h4",{className:"font-medium",children:t.name})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"font-medium",children:[parseFloat(t.prix).toFixed(2)," $"]})})]}),t.notes&&e.jsx("div",{className:"mt-2 text-sm text-muted-foreground",children:t.notes})]},t.id))})]}),f&&e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{href:route("rendezvous.edit",s.ref),children:e.jsx(n,{children:"Modifier le rendez-vous"})})})]})]})]})}export{Se as default};
