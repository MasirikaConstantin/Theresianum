import{j as e,H as F,L as n}from"./app-BiR3H72c.js";import{A as T}from"./app-layout-DXRwYbWn.js";import{B as x}from"./button-DfBT4842.js";import{B as K}from"./badge-NokOUrZG.js";import{C as a,a as r,b as t,d as i,c as o,e as A}from"./card-CtX8457h.js";import{C as h,a as f,b as j}from"./chart-D6TfAjJB.js";import{C as M}from"./chevron-left-CImlN05b.js";import{S as R}from"./shopping-cart-CtXjzZ1W.js";import{c as S}from"./createLucideIcon-AVJzoGs5.js";import{G as E}from"./breadcrumbs-CfH9HSk2.js";import{T as $}from"./trending-up-CTfoIeSh.js";import{A as z,a as H}from"./AreaChart-uj0_NxdG.js";import{C as p,X as u,a as I,Y as O,B as U}from"./generateCategoricalChart-ClOP-bqC.js";import{P as X,a as Y}from"./PieChart-FoGQmK1M.js";import{B as J}from"./BarChart-CLEOG6BU.js";import{L as Q,a as V}from"./LineChart-BVA5dta-.js";import{f as c}from"./format-B6qNwQQI.js";import{f as m}from"./fr-CLbTb0XB.js";import"./app-BojVexQw.js";import"./index-C4BIJOdj.js";import"./index-DL4BAlbN.js";import"./index-CaoPq-lK.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./utils-D-KgF5mV.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./index-DZGh8cYj.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Z=S("Star",W),q=d=>[{title:"Dashboard",href:"/dashboard"},{title:"Clients",href:"/clients"},{title:`Détails de ${d}`,href:"#"}],g={ventes:{label:"Ventes",color:"hsl(var(--chart-1))"},montant:{label:"Montant",color:"hsl(var(--chart-2))"},quantite:{label:"Quantité",color:"hsl(var(--chart-3))"},remise:{label:"Remise",color:"hsl(var(--chart-4))"},promotion:{label:"Promotion",color:"hsl(var(--chart-5))"}},L=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8"];function Me({auth:d,client:s,ventesParMois:k,produitsPopulaires:P,modesPaiement:N,evolutionFidelite:D,statistiquesGenerales:l}){var v,y,b,C,w;const B=d.user.role==="admin"||d.user.role==="gerant";return e.jsxs(T,{auth:d,breadcrumbs:q(s.name),children:[e.jsx(F,{title:`Détails de ${s.name}`}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6 overflow-auto",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{href:route("clients.index"),children:e.jsx(x,{variant:"outline",size:"icon",children:e.jsx(M,{className:"h-4 w-4"})})}),e.jsxs("h1",{className:"text-2xl font-bold tracking-tight",children:["Détails de ",s.name]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{href:route("clients.index"),children:e.jsx(x,{variant:"outline",children:"Retour"})}),B&&e.jsx(n,{href:route("clients.edit",s.ref),children:e.jsx(x,{children:"Modifier"})})]})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(a,{children:[e.jsx(r,{children:e.jsx(t,{children:"Informations principales"})}),e.jsxs(i,{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Nom complet"}),e.jsx("p",{children:s.name})]}),s.telephone&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Téléphone"}),e.jsx("p",{children:s.telephone})]}),s.succursale&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Branche"}),e.jsx("p",{children:s.succursale.nom})]}),s.date_naissance&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date de naissance"}),e.jsxs("p",{children:[c(new Date(s.date_naissance),"PPP",{locale:m})," (",s.age,") ans"]})]})]}),e.jsxs("div",{className:"grid gap-4",children:[s.email&&e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{children:s.email})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Enregistré par"}),e.jsx("p",{children:s.enregistre_par?e.jsx(n,{href:route("utilisateurs.show",s.enregistre_par.ref),children:e.jsx(K,{variant:"outline",children:(v=s.enregistre_par)==null?void 0:v.name})}):"Système"})]}),e.jsxs("div",{className:"grid gap-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Date de création"}),e.jsx("p",{children:c(new Date(s.created_at),"PPPp",{locale:m})})]})]})]})]}),s.notes&&e.jsxs(a,{children:[e.jsx(r,{children:e.jsx(t,{children:"Notes"})}),e.jsx(i,{children:e.jsx("p",{className:"whitespace-pre-line",children:s.notes})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Total des achats"}),e.jsx(R,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.total_achats)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(l==null?void 0:l.montant_total_format)||"0 $"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Points fidélité"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:((y=s.fidelite)==null?void 0:y.points)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[((b=s.fidelite)==null?void 0:b.nombre_achats)||0," achats"]})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Remises obtenues"}),e.jsx(E,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.total_remises_format)||"0 $"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Économies totales"})]})]}),e.jsxs(a,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(t,{className:"text-sm font-medium",children:"Dernier achat"}),e.jsx($,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(i,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(C=s.fidelite)!=null&&C.dernier_achat?c(new Date(s.fidelite.dernier_achat),"PPP",{locale:m}):"Jamais"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(w=s.fidelite)!=null&&w.dernier_achat?c(new Date(s.fidelite.dernier_achat),"yyyy",{locale:m}):""})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(t,{children:"Évolution des achats"}),e.jsx(o,{children:"Montant des achats par mois sur les 12 derniers mois"})]}),e.jsx(i,{children:e.jsx(h,{config:g,children:e.jsxs(z,{accessibilityLayer:!0,data:k,margin:{left:12,right:12},children:[e.jsx(p,{vertical:!1}),e.jsx(u,{dataKey:"mois",tickLine:!1,axisLine:!1,tickMargin:8}),e.jsx(f,{cursor:!1,content:e.jsx(j,{indicator:"line"})}),e.jsx(H,{dataKey:"montant",type:"natural",fill:"var(--color-montant)",fillOpacity:.4,stroke:"var(--color-montant)",stackId:"a"})]})})}),e.jsx(A,{children:e.jsx("div",{className:"flex w-full items-start gap-2 text-sm",children:e.jsx("div",{className:"grid gap-2",children:e.jsx("div",{className:"flex items-center gap-2 font-medium leading-none",children:"Tendance sur les 12 derniers mois"})})})})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(t,{children:"Modes de paiement préférés"}),e.jsx(o,{children:"Répartition des modes de paiement utilisés"})]}),e.jsx(i,{children:e.jsx(h,{config:g,className:"mx-auto aspect-square max-h-[250px]",children:e.jsxs(X,{children:[e.jsx(f,{cursor:!1,content:e.jsx(j,{hideLabel:!0})}),e.jsx(Y,{data:N,dataKey:"count",nameKey:"mode_paiement",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",children:N.map((G,_)=>e.jsx(I,{fill:L[_%L.length]},`cell-${_}`))})]})})})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(t,{children:"Produits favoris"}),e.jsx(o,{children:"Top 5 des produits les plus achetés"})]}),e.jsx(i,{children:e.jsx("div",{className:"h-[300px]",children:e.jsxs(J,{data:P,layout:"vertical",margin:{left:60,right:20},width:600,height:300,children:[e.jsx(p,{horizontal:!1,stroke:"#f0f0f0"}),e.jsx(O,{dataKey:"produit_nom",type:"category",tickLine:!1,axisLine:!1,width:120,tick:{fill:"#000"}}),e.jsx(u,{type:"number",tickLine:!1,axisLine:!1,tick:{fill:"#000"}}),e.jsx(U,{dataKey:"quantite_totale",fill:"#0088FE",radius:[0,4,4,0],animationDuration:1500})]})})})]}),e.jsxs(a,{children:[e.jsxs(r,{children:[e.jsx(t,{children:"Évolution fidélité"}),e.jsx(o,{children:"Progression des points de fidélité au fil du temps"})]}),e.jsx(i,{children:e.jsx(h,{config:g,children:e.jsxs(Q,{accessibilityLayer:!0,data:D,margin:{left:12,right:12},children:[e.jsx(p,{vertical:!1}),e.jsx(u,{dataKey:"date",tickLine:!1,axisLine:!1,tickMargin:8}),e.jsx(f,{cursor:!1,content:e.jsx(j,{})}),e.jsx(V,{dataKey:"points_cumules",type:"monotone",stroke:"#0088FE",strokeWidth:2,dot:!1})]})})})]})]})]})]})}export{Me as default};
