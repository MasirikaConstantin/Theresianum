import{r as u,u as w,j as e,H as N,L as I,t as l}from"./app-BiR3H72c.js";import{A as L}from"./app-layout-DXRwYbWn.js";import{B as p}from"./button-DfBT4842.js";import{I as D}from"./input-CBAXjYrY.js";import{L as R}from"./label-C35PAQno.js";import{C as S}from"./chevron-left-CImlN05b.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./badge-NokOUrZG.js";import"./index-DufLrpEQ.js";function ie({auth:h,service:a,flash:y}){const[o,m]=u.useState(null),g=u.useRef(null),{setData:c,post:x,processing:n}=w({image:null}),j=[{title:"Dashboard",href:"/dashboard"},{title:"Services",href:"/services"},{title:"Modifier une image",href:"#"}],v=s=>{var t;const r=(t=s.target.files)==null?void 0:t[0];if(r){c("image",r);const i=new FileReader;i.onloadend=()=>{m(i.result)},i.readAsDataURL(r)}else c("image",null),m(null)},b=s=>{s.preventDefault(),x(route("services.update-image",a.ref),{onSuccess:r=>{var t,i,d,f;console.log(r),(i=(t=r==null?void 0:r.props)==null?void 0:t.flash)!=null&&i.success&&l.success(r.props.flash.success),(f=(d=r==null?void 0:r.props)==null?void 0:d.flash)!=null&&f.error&&l.error(r.props.flash.error)},onError:()=>{l.error("Une erreur est survenue lors de la mise Ã  jour de l'image")},forceFormData:!0})};return e.jsxs(L,{auth:h,breadcrumbs:j,children:[e.jsx(N,{title:"Modifier une image"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:e.jsx("div",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{href:route("services.index"),children:e.jsx(p,{variant:"outline",size:"icon",children:e.jsx(S,{className:"h-4 w-4"})})}),e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Modifier une image"})]})})}),(o||a.image_url)&&e.jsx("div",{className:"bg-muted relative mb-4 rounded-md overflow-hidden",children:e.jsx("img",{src:o||a.image_url,alt:"Preview",className:"w-full h-64 object-contain mx-auto"})}),e.jsx("form",{onSubmit:b,children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"grid w-full max-w-sm items-center gap-3",children:[e.jsx(R,{htmlFor:"image",children:"Image"}),e.jsx(D,{id:"image",type:"file",ref:g,onChange:v,name:"image",accept:"image/*"})]}),e.jsx(p,{type:"submit",disabled:n,children:n?"Envoi en cours...":"Modifier"})]})})]})]})}export{ie as default};
