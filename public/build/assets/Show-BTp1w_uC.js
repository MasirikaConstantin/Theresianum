import{a as Q,t as D,j as e,H as $,L as z,b}from"./app-BiR3H72c.js";import{A as G}from"./app-layout-DXRwYbWn.js";import{B as i}from"./button-DfBT4842.js";import{B as l}from"./badge-NokOUrZG.js";import{A as _,a as A,b as k,c as P,d as w,e as B,f as T,g as y,h as S}from"./alert-dialog-BGz4gOWV.js";import{C as V,a as H,b as L,d as R,e as J}from"./card-CtX8457h.js";import{f as q}from"./format-B6qNwQQI.js";import{f as E}from"./fr-CLbTb0XB.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";const K=[{title:"Dashboard",href:"/dashboard"},{title:"Transferts",href:"/transferts"},{title:"Détails du transfert",href:"#"}];function Ce({auth:t,transfert:s}){var c,o,m,x,u,h,j,f,p,g;const d=r=>{switch(r){case"validé":return e.jsx(l,{variant:"success",children:"Validé"});case"refusé":return e.jsx(l,{variant:"destructive",children:"Refusé"});default:return e.jsx(l,{variant:"secondary",children:"En attente"})}},{flash:a}=Q().props;a.error&&D.error(a.error),a.success&&D.success(a.success);const n=r=>{I?b.post(route("transferts-central.validate",s.ref),{action:r}):b.post(route("transferts.validate",s.ref),{action:r})},F=((c=t.user)==null?void 0:c.role)==="gerant"||((o=t.user)==null?void 0:o.role)==="caissier",I=((m=t.user)==null?void 0:m.role)==="gerant"||((x=s.transfert_stocks[0])==null?void 0:x.succursale_source_id);return e.jsxs(G,{auth:t,breadcrumbs:K,children:[e.jsx($,{title:`Détails du transfert ${s.ref}`}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Détails du transfert"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(z,{href:route("transferts.index"),children:e.jsx(i,{variant:"outline",children:"Retour à la liste"})})})]}),e.jsxs(V,{children:[e.jsx(H,{children:e.jsx(L,{className:"text-lg font-semibold",children:"Informations du transfert"})}),e.jsx(R,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Statut"}),e.jsx("p",{className:"font-medium",children:d(((u=s.transfert_stocks[0])==null?void 0:u.statut)||"en attente")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Note"}),e.jsx("p",{className:"font-medium",children:s.note||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Initiateur"}),e.jsx("p",{className:"font-medium",children:(h=s.user)==null?void 0:h.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date demande"}),e.jsx("p",{className:"font-medium",children:q(new Date(s.created_at),"PPpp",{locale:E})})]}),((j=s.transfert_stocks[0])==null?void 0:j.date_validation)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date validation"}),e.jsx("p",{className:"font-medium",children:q(new Date(s.transfert_stocks[0].date_validation),"PPpp",{locale:E})})]}),((f=s.transfert_stocks[0])==null?void 0:f.validateur)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Validateur"}),e.jsx("p",{className:"font-medium",children:(p=s.transfert_stocks[0].validateur)==null?void 0:p.name})]})]})})]}),e.jsxs(V,{className:"grid gap-6",children:[e.jsx(H,{children:e.jsx(L,{className:"text-lg font-semibold",children:"Produits transférés"})}),e.jsxs(R,{children:[e.jsx("div",{className:"grid gap-2"}),e.jsx("div",{className:"grid gap-2",children:e.jsx("div",{className:"border rounded-lg overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"p-4 text-left",children:"Produit"}),e.jsx("th",{className:"p-4 text-left",children:"Quantité"}),e.jsx("th",{className:"p-4 text-left",children:"Source"}),e.jsx("th",{className:"p-4 text-left",children:"Destination"}),e.jsx("th",{className:"p-4 text-left",children:"Statut"})]})}),e.jsx("tbody",{children:s.transfert_stocks.map((r,O)=>{var v,N,C;return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-4",children:((v=r.produit)==null?void 0:v.name)||"Produit supprimé"}),e.jsx("td",{className:"p-4",children:r.quantite}),e.jsx("td",{className:"p-4",children:((N=r.succursale_source)==null?void 0:N.nom)||"Central"}),e.jsx("td",{className:"p-4",children:((C=r.succursale_destination)==null?void 0:C.nom)||"Branche supprimée"}),e.jsx("td",{className:"p-4",children:d(r.statut)})]},O)})})]})})})]}),F&&e.jsx(J,{children:((g=s.transfert_stocks[0])==null?void 0:g.statut)==="en attente"&&e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(_,{children:[e.jsx(A,{asChild:!0,children:e.jsx(i,{variant:"destructive",children:"Refuser le transfert"})}),e.jsxs(k,{children:[e.jsxs(P,{children:[e.jsx(w,{children:"Confirmer le refus"}),e.jsx(B,{children:"Êtes-vous sûr de vouloir refuser ce transfert ? Cette action ne pourra pas être annulée."})]}),e.jsxs(T,{children:[e.jsx(y,{children:"Annuler"}),e.jsx(S,{onClick:()=>n("refusé"),children:"Confirmer le refus"})]})]})]}),e.jsxs(_,{children:[e.jsx(A,{asChild:!0,children:e.jsx(i,{children:"Valider le transfert"})}),e.jsxs(k,{children:[e.jsxs(P,{children:[e.jsx(w,{children:"Confirmer la validation"}),e.jsx(B,{children:"Êtes-vous sûr de vouloir valider ce transfert ? Les stocks seront automatiquement mis à jour."})]}),e.jsxs(T,{children:[e.jsx(y,{children:"Annuler"}),e.jsx(S,{onClick:()=>n("validé"),children:"Confirmer la validation"})]})]})]})]})})]})]})]})}export{Ce as default};
