import{a as B,t as p,j as e,H as R,L as h,b as o}from"./app-BiR3H72c.js";import{A as k,a as y,b as H,c as P}from"./app-layout-DXRwYbWn.js";import{B as d}from"./button-DfBT4842.js";import{T as U,f as E,a as F,b as f,c as l,d as L,e as t}from"./table-CMAMKCJS.js";import{B as z}from"./badge-NokOUrZG.js";import{A as I,a as V,b as G,c as $,d as q,e as J,f as K,g as M,h as O}from"./alert-dialog-BGz4gOWV.js";import{S as g,a as v,b as A,c as b,d as r}from"./select-B5KxOem9.js";import{S as Q}from"./switch-BTEMsqTc.js";import{P as W}from"./plus-BhylbLjU.js";import{E as X}from"./eye-xwMsSdsH.js";import{P as Y}from"./pencil-BBfKa5zT.js";import{T as Z}from"./trash-2-DAGSehnZ.js";import"./app-BojVexQw.js";import"./breadcrumbs-CfH9HSk2.js";import"./createLucideIcon-AVJzoGs5.js";import"./index-CaoPq-lK.js";import"./utils-D-KgF5mV.js";import"./index-DZGh8cYj.js";import"./index-C4BIJOdj.js";import"./chevron-down-C8aG4wQu.js";import"./index-D85psPK1.js";import"./index-DL4BAlbN.js";import"./index-D-SBhKFM.js";import"./chevron-right-F_DONt-v.js";import"./index-CHBa3DK4.js";import"./index-DZfrvXPy.js";import"./chevrons-up-down-D26-hiHV.js";import"./app-logo-icon-D1TxLKab.js";import"./calendar-CQ4TJ2Ye.js";import"./package-CMie0C_N.js";import"./circle-alert-CxFuhzFA.js";import"./index-BdQq_4o_.js";import"./index-Di7OUUGl.js";import"./check-DVZ7LPyx.js";const ee=[{title:"Dashboard",href:"/dashboard"},{title:"Utilisateurs",href:"/utilisateurs"}];function Ee({auth:C,is_admin:u,is_gerant:se}){const{flash:c,users:S,succursales:N}=B().props;c.error&&p.error(c.error),c.success&&p.success(c.success);const m=u,x=u,D=s=>{o.delete(route("utilisateurs.destroy",s))},T=(s,i)=>{o.patch(route("utilisateurs.update-role",s),{role:i})},w=(s,i)=>{o.patch(route("utilisateurs.update-status",s),{is_active:i})},_=(s,i)=>{const n=i==="null"?null:i;o.patch(route("utilisateurs.update-succursale",s),{succursale_id:n})};return e.jsxs(k,{auth:C,breadcrumbs:ee,children:[e.jsx(R,{title:"Utilisateurs"}),e.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 md:gap-8 md:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Gestion des utilisateurs"}),e.jsx(h,{href:route("utilisateurs.create"),children:m&&e.jsxs(d,{children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Ajouter un utilisateur"]})})]}),e.jsx("div",{className:"rounded-lg ",children:e.jsxs(U,{children:[e.jsx(E,{children:"Liste des utilisateurs"}),e.jsx(F,{children:e.jsxs(f,{children:[e.jsx(l,{children:"Avatar"}),e.jsx(l,{children:"Nom"}),e.jsx(l,{children:"Email"}),e.jsx(l,{children:"Rôle"}),e.jsx(l,{children:"Statut"}),e.jsx(l,{children:"Branche"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(L,{children:S.map(s=>{var i,n,j;return e.jsxs(f,{children:[e.jsx(t,{children:e.jsx(y,{children:s.avatar?e.jsx(H,{src:`/storage/${s.avatar}`}):e.jsx(P,{children:s.name.split(" ").map(a=>a[0]).join("")})})}),e.jsx(t,{className:"font-medium",children:s.name.slice(0,15)+"..."}),e.jsx(t,{children:s.email.slice(0,15)+"..."}),e.jsx(t,{children:e.jsxs(g,{value:s.role,onValueChange:a=>T(s.id,a),children:[e.jsx(v,{className:"w-[120px]",children:e.jsx(A,{placeholder:"Rôle"})}),e.jsxs(b,{children:[m&&e.jsx(r,{value:"admin",children:"Admin"}),e.jsx(r,{value:"gerant",children:"D.R.H"}),e.jsx(r,{value:"coiffeur",children:"Coiffeur"}),e.jsx(r,{value:"caissier",children:"Caissier"}),e.jsx(r,{value:"aucun",children:"Aucun"})]})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{checked:s.is_active,onCheckedChange:a=>w(s.id,a)}),e.jsx(z,{variant:s.is_active?"default":"secondary",children:s.is_active?"Actif":"Inactif"})]})}),e.jsx(t,{children:e.jsxs(g,{value:((i=s.succursale_id)==null?void 0:i.toString())||"null",onValueChange:a=>_(s.id,a),children:[e.jsx(v,{className:"w-[180px]",children:e.jsx(A,{placeholder:"Branche"})}),e.jsx(b,{children:x?e.jsxs(e.Fragment,{children:[e.jsx(r,{value:"null",children:"Aucune branche"}),N.map(a=>e.jsx(r,{value:a.id.toString(),children:a.nom},a.id))]}):e.jsx(r,{value:((n=s.succursale_id)==null?void 0:n.toString())||"null",children:((j=s.succursale)==null?void 0:j.nom)||"null"})})]})}),e.jsxs(t,{className:"flex gap-2",children:[e.jsx(h,{href:route("utilisateurs.show",s.ref),children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsx(h,{href:route("utilisateurs.edit",s.ref),children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(Y,{className:"h-4 w-4"})})}),x&&e.jsx(e.Fragment,{children:e.jsxs(I,{children:[e.jsx(V,{asChild:!0,children:e.jsx(d,{variant:"destructive",size:"sm",children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsxs(G,{children:[e.jsxs($,{children:[e.jsx(q,{children:"Êtes-vous sûr ?"}),e.jsx(J,{children:"Cette action supprimera définitivement l'utilisateur et ne pourra pas être annulée."})]}),e.jsxs(K,{children:[e.jsx(M,{children:"Annuler"}),e.jsx(O,{onClick:()=>D(s.id),children:"Supprimer"})]})]})]})})]})]},s.id)})})]})})]})]})}export{Ee as default};
